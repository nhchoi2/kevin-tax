<header class="main-header fixed-header">
  <div class="header-inner container">
    
    <!-- 로고 -->
    <div class="logo">
      <a href="/">
        <img src="/img/logo.png" alt="로고" />
      </a>
    </div>

    <!-- 메뉴 -->
    <nav class="main-nav">
      <a href="/intro">회사소개</a>
      <a href="/service">서비스소개</a>
      <a href="/blog">블로그</a>
      <a href="/map">오시는 길</a>
      <a href="/apply">고객후기</a>
    </nav>

    <!-- 우측 버튼 영역 -->
    <div class="nav-actions" style="position: relative;">
      <% if (user) { %>
        <div class="user-dropdown">
          <span class="welcome-text"><%= user.name %>님 환영합니다</span>
          <img src="/img/profile-icon.png" alt="프로필" class="profile-icon" onclick="toggleDropdown()" />
          <div id="dropdown-menu" class="dropdown-menu hidden">
            <a href="/mypage">마이페이지</a>
            <a href="/logout">로그아웃</a>
          </div>
        </div>
      <% } else { %>
        <a href="/login" class="btn-outline">로그인</a>
        <a href="/apply" class="btn-primary">상담 신청하기</a>
      <% } %>
    </div>

  </div>
</header>

<script>
  function toggleDropdown() {
    const menu = document.getElementById('dropdown-menu');
    menu.classList.toggle('hidden');
  }

  window.addEventListener('click', function (e) {
    const menu = document.getElementById('dropdown-menu');
    if (!e.target.closest('.user-dropdown')) {
      menu.classList.add('hidden');
    }
  });
</script>

<style>
  .user-dropdown {
    display: flex;
    align-items: center;
    gap: 10px;
    position: relative;
  }

  .welcome-text {
    font-size: 14px;
    font-weight: 500;
    color: #333;
  }

  .profile-icon {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    cursor: pointer;
  }

  .dropdown-menu {
    position: absolute;
    top: 40px;
    right: 0;
    background: white;
    border: 1px solid #ccc;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
    width: 140px;
    border-radius: 6px;
    padding: 5px 0;
    z-index: 99;
  }

  .dropdown-menu a {
    display: block;
    padding: 10px 16px;
    font-size: 14px;
    color: #333;
    text-decoration: none;
  }

  .dropdown-menu a:hover {
    background: #f5f5f5;
  }

  .hidden {
    display: none;
  }

  @media (max-width: 768px) {
    .user-dropdown {
      flex-direction: column;
      align-items: flex-end;
      gap: 4px;
    }
  }
</style>